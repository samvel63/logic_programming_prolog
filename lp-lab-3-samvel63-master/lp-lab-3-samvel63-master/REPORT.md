#№ Отчет по лабораторной работе №3
## по курсу "Логическое программирование"

## Решение задач методом поиска в пространстве состояний

### студент: Мхитарян С.А.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |             |               |
| Левинская М.А.|  24.12.17   |  5            |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*


## Введение

Наверно, самыми удобными задачами для решения методом поиска в пространстве состояний являются такие задачи, где присутствует дискретное множество состояний, 
в которых может находиться определённый объект или система, с правилами и условиями перехода из одного состояния в другое.
<br>Prolog основан на языке предикатов математической логики. Следовательно, Prolog как раз и подходит для решения таких задач.

## Задание

Вдоль доски расположено 8 лунок, в которых лежат 4 черных и 3 белых 
шара. Передвинуть черные шары на место белых, а белых - на место 
черных. Шар можно передвинуть в соседнюю с ним пустую лунку, либо в 
пустую лунку, находящуюся непосредственно за ближайшим шаром. При 
этом черные шары можно передвигать только вправо, а белые - только влево. 

## Принцип решения

Для решение нужны 4 шага:
* Если пустая лунку и справа белый шар, то поменять местами;
* Если черный шар и справа пустая лунка, то поменять местами;
* Если пустая лунка, затем черный шар и правее белый шар, то меняем на последовательность белый-черный-пусто;
* Если черный шар, затем белый шар и правее пустая лунка, то меняем на последовательность пусто-белый-черный.


Логические шаги для решения задачи:
```prolog
step(A,B):-
    append(Begin,["_","w"|Tail],A),
    append(Begin,["w","_"|Tail],B).

step(A,B):-
    append(Begin,["b","_"|Tail],A),
    append(Begin,["_","b"|Tail],B).

step(A,B):-
    append(Begin,["_","b","w"|Tail],A),
    append(Begin,["w","b","_"|Tail],B).

step(A,B):-
    append(Begin,["b","w","_"|Tail],A),
    append(Begin,["_","w","b"|Tail],B).
```

Поиск в глубину:
```prolog
dFS(Goal,[Goal|Tail]) :-
        !, print_ans([Goal|Tail]). 
dFS(Goal, [Curr|Tail]) :-
    step(Curr, Tmp),
    not(member(Tmp,Tail)),
    dFS(Goal, [Tmp, Curr|Tail]).
```

Поиск в ширину:
```prolog
next(X, HasBeen, Y) :-
    step(X,Y),
    not(member(Y,HasBeen)). 

bFS([First|_],Goal,First) :- 
    First = [Goal|_].
bFS([[LastWay|HasBeen]|OtherWays],Finish,Way):-  
    findall([Z,LastWay|HasBeen],
            next(LastWay, HasBeen, Z), List),
            append(List,OtherWays,NewWays), 
            bFS(NewWays,Finish,Way).
```

Поиск с итеративным погружением:
```prolog
prolong([X|T],[Y,X|T]) :-
    step(X,Y),
    not(member(Y,[X|T])). 

switer([Goal|Tail],Goal,[Goal|Tail],0).

switer(TempWay,Goal,Way,N):- 
    N > 0,
    prolong(TempWay,NewWay),
    N1 is N-1,
    switer(NewWay,Goal,Way,N1).
```

## Результаты
```prolog
?- solve(["b","b","b","b","_","w","w","w"],["w","w","w","_","b","b","b","b"]).
SEARCH WITH ID START
[b,b,b,b,_,w,w,w]
[b,b,b,b,w,_,w,w]
[b,b,b,_,w,b,w,w]
[b,b,_,b,w,b,w,w]
[b,b,w,b,_,b,w,w]
[b,b,w,b,w,b,_,w]
[b,b,w,b,w,b,w,_]
[b,b,w,b,w,_,w,b]
[b,b,w,_,w,b,w,b]
[b,_,w,b,w,b,w,b]
[_,b,w,b,w,b,w,b]
[w,b,_,b,w,b,w,b]
[w,b,w,b,_,b,w,b]
[w,b,w,b,w,b,_,b]
[w,b,w,b,w,_,b,b]
[w,b,w,_,w,b,b,b]
[w,_,w,b,w,b,b,b]
[w,w,_,b,w,b,b,b]
[w,w,w,b,_,b,b,b]
[w,w,w,_,b,b,b,b]
SEARCH WITH ID END

TIME IS 0.06160593032836914

SEARCH IN DEPTHS START
[b,b,b,b,_,w,w,w]
[b,b,b,b,w,_,w,w]
[b,b,b,_,w,b,w,w]
[b,b,_,b,w,b,w,w]ё  ,

[b,b,w,b,_,b,w,w]
[b,b,w,b,w,b,_,w]
[b,b,w,b,w,b,w,_]
[b,b,w,b,w,_,w,b]
[b,b,w,_,w,b,w,b]
[b,_,w,b,w,b,w,b]
[_,b,w,b,w,b,w,b]
[w,b,_,b,w,b,w,b]
[w,b,w,b,_,b,w,b]
[w,b,w,b,w,b,_,b]
[w,b,w,b,w,_,b,b]
[w,b,w,_,w,b,b,b]
[w,_,w,b,w,b,b,b]
[w,w,_,b,w,b,b,b]
[w,w,w,b,_,b,b,b]
[w,w,w,_,b,b,b,b]
SEARCH IN DEPTHS END

TIME IS 0.10312199592590332

SEARCH IN BFS START
[b,b,b,b,_,w,w,w]
[b,b,b,b,w,_,w,w]
[b,b,b,_,w,b,w,w]
[b,b,_,b,w,b,w,w]
[b,b,w,b,_,b,w,w]
[b,b,w,b,w,b,_,w]
[b,b,w,b,w,b,w,_]
[b,b,w,b,w,_,w,b]
[b,b,w,_,w,b,w,b]
[b,_,w,b,w,b,w,b]
[_,b,w,b,w,b,w,b]
[w,b,_,b,w,b,w,b]
[w,b,w,b,_,b,w,b]
[w,b,w,b,w,b,_,b]
[w,b,w,b,w,_,b,b]
[w,b,w,_,w,b,b,b]
[w,_,w,b,w,b,b,b]
[w,w,_,b,w,b,b,b]
[w,w,w,b,_,b,b,b]
[w,w,w,_,b,b,b,b]
SEARCH IN BFS END

TIME IS 0.0998220443725586
```

## Выводы

В данной лабораторной работе мною были применены навыки на языке Prolog для решения задачи на поиск в пространстве состояний. Как оказалось, Prolog в данном 
случае весьма эффективный инструмент.
<br>Были написаны три алгоритма поиска: в глубину, в ширину и с итеративным погружением. Все три алгоритма справились со своей задачей, но наиболее 
эффективно, как видно по результатам времени оказался поиск с итеративным погружением. Так вышло, потому что он является некой модификацией поиска в глубину и 
в ширину. Отличие его в том, что он ищет кратчайший путь, т.е. если путь нашелся, алгоритм закончил работу и дальше не будет перебирать варианты.
